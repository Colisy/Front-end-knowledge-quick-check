# webpack
#### æ˜¯ä»€ä¹ˆ
webpackæ˜¯ä¸€ä¸ª**æ¨¡å—æ‰“åŒ…å·¥å…·**ã€‚å¯¹äºä¸åŒç±»å‹çš„ä¾èµ–ï¼Œwebpackæœ‰å¯¹åº”çš„æ¨¡å—åŠ è½½å™¨ï¼Œè€Œä¸”ä¼šåˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ€ååˆå¹¶ç”Ÿæˆä¼˜åŒ–çš„é™æ€èµ„æºã€‚
#### webpackçš„åŸºæœ¬åŠŸèƒ½
- ä»£ç è½¬æ¢
- æ–‡ä»¶ä¼˜åŒ–
- ä»£ç åˆ†å‰²
- æ¨¡å—åˆå¹¶
- çƒ­æ›´æ–°
- ä»£ç æ ¡éªŒ
#### loader
>webpackè‡ªèº«åªèƒ½ç†è§£jsæ–‡ä»¶ï¼Œä½†æ˜¯é¡¹ç›®ä¸­è‚¯å®šä¼šæœ‰å…¶ä»–çš„æ–‡ä»¶ï¼Œwebpackéœ€è¦ä¾é å„ç±»loaderå»**å¤„ç†éjsæ–‡ä»¶**ï¼Œå°†ä»–ä»¬è½¬æ¢æˆwebpackèƒ½å¤Ÿæœ‰æ•ˆè¿›è¡Œå¤„ç†çš„æ¨¡å—ï¼Œç„¶åwebpackä¼šå¯¹ä»–ä»¬è¿›è¡Œæ‰“åŒ…å¤„ç†ç„¶åè¾“å‡ºã€‚
- img
  url-loaderï¼šåœ¨æ–‡ä»¶å¾ˆå°çš„æƒ…å†µä¸‹ä»¥ base64 çš„æ–¹å¼æŠŠæ–‡ä»¶å†…å®¹æ³¨å…¥åˆ°ä»£ç ä¸­å»ï¼›
  html-loaderï¼šå¤„ç†æ ‡ç­¾é‡Œçš„å›¾ç‰‡ï¼›
  image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶ï¼›
- css
  less-loader
  css-loader
  vue-style-loader / style-loaderï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSS;  
  postcss-loaderï¼šæ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼›
- js
  babel-loaderï¼šæŠŠ ES6 è½¬æ¢æˆ ES5;
  eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç ;
- vue
  >vueæ–‡ä»¶æ˜¯ä¸€ä¸ªSFCç±»æ–‡ä»¶ã€‚

  vue-loader
  vue-template-compilerï¼šå¤„ç†æ¨¡ç‰ˆå­—ç¬¦ä¸²ï¼Œæ³¨å…¥åˆ°ä» script å¯¼å‡ºçš„ç»„ä»¶ä¸­ï¼›
  vue-style-loaderï¼šç”¨äºå¤„ç†vue-loaderè§£æåçš„styleï¼›
  >è¿˜éœ€è¦æ’ä»¶VueLoaderPlugin
#### plugins
- html-webpack-pluginï¼šç”Ÿæˆä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œè‡ªåŠ¨å¼•å…¥bundle.js
- clean-webpack-pluginï¼šåˆ é™¤åŸæ¥çš„distæ–‡ä»¶
- Webpack.HotModuleReplacementPluginï¼šçƒ­æ›´æ–°
- webpack-bundle-analyzerï¼šåˆ†ææ‰“åŒ…åæ–‡ä»¶
- HappyPackï¼šå¼€å¯å¤šè¿›ç¨‹loaderè½¬æ¢
- VueLoaderPluginï¼švue-loaderçš„ä½¿ç”¨éƒ½æ˜¯éœ€è¦ä¼´ç”Ÿ VueLoaderPlugin
#### loaderï¼ŒpluginsåŒºåˆ«
- ä½œç”¨
  Loaderçš„ä½œç”¨æ˜¯è®©webpackæ‹¥æœ‰äº†åŠ è½½å’Œ**è§£æéJsæ–‡ä»¶**çš„èƒ½åŠ›ã€‚
 Pluginå¯ä»¥**æ‰©å±•webpackçš„åŠŸèƒ½**ï¼Œè®©webpackå…·æœ‰æ›´å¤šçš„çµæ´»æ€§ã€‚åœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡ Webpack æä¾›çš„ API æ”¹å˜è¾“å‡ºç»“æœã€‚æ’ä»¶ç›¸å¯¹äºloaderæ¥è¯´ï¼Œå¯ä»¥æ‰§è¡Œæ›´å¹¿çš„ä»»åŠ¡ï¼Œä»æ‰“åŒ…åˆ°å‹ç¼©ï¼Œåˆ°åˆ†å‰²æ–‡ä»¶ã€‚
- ç”¨æ³•
  Loaderåœ¨module.rulesä¸­é…ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä½œä¸º**æ¨¡å—çš„è§£æè§„åˆ™**è€Œå­˜åœ¨ã€‚ç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªObjectï¼Œé‡Œé¢æè¿°äº†å¯¹äºä»€ä¹ˆç±»å‹çš„æ–‡ä»¶ï¼ˆtestï¼‰ï¼Œä½¿ç”¨ä»€ä¹ˆåŠ è½½(loader)å’Œä½¿ç”¨çš„å‚æ•°ï¼ˆoptionsï¼‰ã€‚
  Pluginåœ¨pluginsä¸­å•ç‹¬é…ç½®ã€‚ ç±»å‹ä¸ºæ•°ç»„ï¼Œæ¯ä¸€é¡¹æ˜¯ä¸€ä¸ª**pluginçš„å®ä¾‹**ï¼Œå‚æ•°éƒ½é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥ã€‚
#### æ„å»ºè¿‡ç¨‹
>webpackæ˜¯**åŸºäºå…¥å£**çš„ã€‚webpackä¼šè‡ªåŠ¨åœ°**é€’å½’è§£æ**å…¥å£æ‰€éœ€è¦åŠ è½½çš„æ‰€æœ‰èµ„æºæ–‡ä»¶ï¼Œç„¶åç”¨**ä¸åŒçš„Loaderæ¥å¤„ç†ä¸åŒçš„æ–‡ä»¶ï¼Œç”¨Pluginæ¥æ‰©å±•webpackåŠŸèƒ½**ã€‚  
#### æ„å»ºæ€§èƒ½ä¼˜åŒ–
- é…ç½®modeå‚æ•°
  >å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œwebpack4 ä¼šå°† mode çš„é»˜è®¤å€¼è®¾ç½®ä¸º production,productionæ¨¡å¼ä¸‹ä¼šè¿›è¡Œtree shaking(å»é™¤æ— ç”¨ä»£ç )å’Œuglifyjs(ä»£ç å‹ç¼©æ··æ·†)
- ç¼©å°æ–‡ä»¶çš„æœç´¢èŒƒå›´
  1. resolve 
     aliasï¼š`'@': path.resolve(__dirname, './src')`
     extensionsï¼šå®šä¹‰çš„åç¼€æŸ¥æ‰¾æ–‡ä»¶
  2. loader
     excludeï¼š`exclude: /node_modules/`
  3. noParseï¼šç±»ä¼¼jqueryè¿™ç±»ä¾èµ–åº“ï¼Œä¸€èˆ¬ä¼šè®¤ä¸ºä¸ä¼šå¼•ç”¨å…¶ä»–çš„åŒ…ï¼ŒnoParseå±æ€§,å‘Šè¯‰webpackä¸å¿…è§£æ
- HappyPackå¼€å¯å¤šè¿›ç¨‹Loaderè½¬æ¢
- æŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—
  webpack.DllPlugin
#### å‰ç«¯æ€§èƒ½ä¼˜åŒ–
- image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶ï¼›
- productionæ¨¡å¼ä¸‹ä¼šè¿›è¡Œtree shaking(å»é™¤æ— ç”¨ä»£ç )å’Œuglifyjs(ä»£ç å‹ç¼©æ··æ·†)
- è·¯ç”±æŒ‰éœ€åŠ è½½
  webpackæä¾›çš„require.ensure()
  esææ¡ˆçš„import()
- ä»£ç åˆ†å‰²
#### ä»£ç åˆ†å‰²
```
optimization:{
  splitChunks: {
    // è¡¨ç¤ºé€‰æ‹©å“ªäº› chunks è¿›è¡Œåˆ†å‰²ï¼Œå¯é€‰å€¼æœ‰ï¼šasyncï¼Œinitialå’Œall
    chunks: "async",
    // è¡¨ç¤ºæ–°åˆ†ç¦»å‡ºçš„chunkå¿…é¡»å¤§äºç­‰äºminSizeï¼Œé»˜è®¤ä¸º30000ï¼Œçº¦30kbã€‚
    minSize: 30000,
    // è¡¨ç¤ºä¸€ä¸ªæ¨¡å—è‡³å°‘åº”è¢«minChunksä¸ªchunkæ‰€åŒ…å«æ‰èƒ½åˆ†å‰²ã€‚é»˜è®¤ä¸º1ã€‚
    minChunks: 1,
    // è¡¨ç¤ºæŒ‰éœ€åŠ è½½æ–‡ä»¶æ—¶ï¼Œå¹¶è¡Œè¯·æ±‚çš„æœ€å¤§æ•°ç›®ã€‚é»˜è®¤ä¸º5ã€‚
    maxAsyncRequests: 5,
    // è¡¨ç¤ºåŠ è½½å…¥å£æ–‡ä»¶æ—¶ï¼Œå¹¶è¡Œè¯·æ±‚çš„æœ€å¤§æ•°ç›®ã€‚é»˜è®¤ä¸º3ã€‚
    maxInitialRequests: 3,
    // è¡¨ç¤ºæ‹†åˆ†å‡ºçš„chunkçš„åç§°è¿æ¥ç¬¦ã€‚é»˜è®¤ä¸º~ã€‚å¦‚chunk~vendors.js
    automaticNameDelimiter: '~',
    // è®¾ç½®chunkçš„æ–‡ä»¶åã€‚é»˜è®¤ä¸ºtrueã€‚å½“ä¸ºtrueæ—¶ï¼ŒsplitChunksåŸºäºchunkå’ŒcacheGroupsçš„keyè‡ªåŠ¨å‘½åã€‚
    name: true,
    // cacheGroups ä¸‹å¯ä»¥å¯ä»¥é…ç½®å¤šä¸ªç»„ï¼Œæ¯ä¸ªç»„æ ¹æ®testè®¾ç½®æ¡ä»¶ï¼Œç¬¦åˆtestæ¡ä»¶çš„æ¨¡å—ï¼Œå°±åˆ†é…åˆ°è¯¥ç»„ã€‚
    //æ¨¡å—å¯ä»¥è¢«å¤šä¸ªç»„å¼•ç”¨ï¼Œä½†æœ€ç»ˆä¼šæ ¹æ®priorityæ¥å†³å®šæ‰“åŒ…åˆ°å“ªä¸ªç»„ä¸­ã€‚é»˜è®¤å°†æ‰€æœ‰æ¥è‡ª node_modulesç›®å½•çš„æ¨¡å—æ‰“åŒ…è‡³vendorsç»„ï¼Œå°†ä¸¤ä¸ªä»¥ä¸Šçš„chunkæ‰€å…±äº«çš„æ¨¡å—æ‰“åŒ…è‡³defaultç»„ã€‚
    cacheGroups: {
      vendors: {
          test: /[\\/]node_modules[\\/]/,
          priority: -10
      },
      // 
      default: {
          minChunks: 2,
          priority: -20,
          reuseExistingChunk: true
      }
    }
  }
}
```
#### é…ç½®å¤šé¡µåº”ç”¨
[ğŸ”—é“¾æ¥](https://www.imooc.com/article/23643)
#### æ‰‹å†™loader
[ğŸ”—é“¾æ¥](https://juejin.im/post/5e532b116fb9a07ce152c31a#heading-13)
#### æ‰‹å†™plugin
æ’ä»¶æš´éœ²çš„æ˜¯æ„é€ å‡½æ•°ï¼ˆclassï¼‰,å¯ä»¥ç›‘å¬webpackæ‰“åŒ…çš„è¿‡ç¨‹
[ğŸ”—é“¾æ¥](https://juejin.im/post/5e532b116fb9a07ce152c31a#heading-21)





