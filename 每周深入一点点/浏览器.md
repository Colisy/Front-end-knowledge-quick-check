# 浏览器
- 用户界面

>除了浏览器主窗口显示请求的页面之外，其他显示的部分都属于用户界面。

- 浏览器引擎(负责窗口管理、Tab进程管理等)
- 渲染引擎(又叫内核，负责HTML解析、页面渲染)
- JS引擎(JS解释器，如Chrome和Nodejs采用的V8)

## 浏览器的多进程架构
1. Browser进程

    浏览器的主线程，主要负责浏览器的页面管理、书签、前进后退、资源下载管理等，**整个浏览器应用程序只有一个**，对应上述浏览器组成中的浏览器引擎。

2. 渲染进程

    内核进程、负责页面渲染、JS执行，对应的是上述的渲染引擎和JS引擎，一个浏览器可以包含多个渲染进程，**每个Tab窗口页对应一个渲染进程**

3. GPU进程

    负责GPU渲染，**整个浏览器应用程序只有一**个

4. 插件进程

    浏览器安装的插件(扩展程序)，**每个插件会创建一个进程**


#### 一个渲染进程主要包括如下线程：

1. GUI线程(主要负责解析HTML、CSS和渲染页面)

2. JS引擎线程(负责解析和执行JS代码)

3. 事件线程(控制事件循环)

4. 定时器线程(处理定时器相关逻辑)

5. 异步请求线程(发起Ajax时会生成该线程)

    同步和异步
    >同步是代码执行后就可以获得想要的结果，异步是指代码执行之后不能立即获得结果，
    
    同步任务和异步任务
    >同步任务指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；异步任务指的是，不进入主线程、而是由事件线程调度，在满足执行条件的时候放到事件队列中，等待主线程(JS线程)的执行。
线程规则：
- 一个渲染进程同时只有一个JS解析线程在运行

- JS引擎线程不停的处理事件线程推送到事件队列中的任务

- 定时器和异步请求最终生成的回调事件也由事件线程来控制和管理

>在ES6当中，引入了microtask的概念，microtask会在当前的任务执行完成之后立即执行。