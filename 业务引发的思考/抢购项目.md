# 抢购项目
## 业务描述
>业务逻辑和盈利逻辑有些复杂，我抛开这些只讲实现的功能点，不讲为什么这么做。
<br>
每周开启一次不同商品的活动或同个商品的不同期，通过抢购碎片，换取对应商品。抢购碎片分两个阶段，第一个阶段限时限量，第二个阶段限时不限量，抢购量达到一定额度，此次抢购标记成功否则作废。每期会根据运营反馈调整玩法。大概进行3个多月，10多期。

- 每周进行，每周调整玩法
- 抢购状态
- 抢购验证
- 调用用户系统模块，资产系统模块

## 抢购状态同步
>第一阶段和第二阶段分别有，未开始、抢购中、结束三种状态，而且涉及首页展位、认购页面、订单页面三个页面。后期可能涉及更多页面，加入更多状态。

引入vuex做状态管理，多个页面状态共享
- 在actions发请求，为了方便请求到结果后进行一些操作，用promise将请求包一层返回，这样dispatch之后就能进行拿到结果的操作了。
- 请求到的信息要自己处理，所以放到getter中
- 状态更新的问题，采用的是定时器，由于项目周期，放弃了后端轮询和websocket
## 抢购前后端验证
为了给后端分压，前端要做一些验证
1. 人机验证，网易极验
2. 前端验证

    kyc认证，调用**用户系统模块**
3. 后端验证

    验证结果要求对话框显示，关于错误提示项目之前用axios的响应拦截器做的toast反馈，所以要对认购接口放行，留到页面单独处理
## 资产
订单页要显示个人资产，认购也涉及到资产，调用**资产系统模块**

需要签用户token、账户token、资产token，而且是签一个才有资格签另一个，所以用async await避免回调地狱让结构更清晰
## 多期
多期用商品名称和期数标记，从首页推荐位信息中拿到，拼接到路由
## 收获
项目快速迭代，要求代码健壮、可拓展、可复用

了解设计模式的一些思想

- 将变与不变分离，确保变化的部分灵活、不变的部分稳定。

- 单一功能原则

- 开放封闭原则


